{"version":3,"file":"app.js","names":["App","quill","React","useRef","_React$useState","useState","_React$useState2","_slicedToArray","delta","setDelta","initContent","getQuill","quillIns","current","quillChange","old","source","JSON","stringify","getContents","RichTextEditor","window","quillReactCommercial","createElement","className","i18n","readOnly","modules","table","codeHighlight","imageHandler","imgUploadApi","formData","request","apiURL","ajaxFormPostOptions","then","response","url","uploadFailCB","console","error","content","onChange","onFocus","arg","style","height","domContainer","document","querySelector","root","ReactDOM","createRoot","render"],"sources":["../app.js"],"sourcesContent":["const App = () => {\n  const quill = React.useRef({});\n  const [delta, setDelta] = React.useState('');\n  const initContent = '';\n    // {\"ops\":[{\"insert\":\"\\n\\nawef\"},{\"attributes\":{\"list\":\"ordered-3\"},\"insert\":\"\\n\"},{\"insert\":\"awfeawef\"},{\"attributes\":{\"list\":\"ordered-3\"},\"insert\":\"\\n\"},{\"insert\":\"awfe\"},{\"attributes\":{\"list\":\"ordered-3\"},\"insert\":\"\\n\"},{\"insert\":\"\\n\\n违法未\"},{\"attributes\":{\"list\":\"ordered\"},\"insert\":\"\\n\"},{\"insert\":\"啊违法\"},{\"attributes\":{\"list\":\"ordered\"},\"insert\":\"\\n\"}]};\n  const getQuill = (quillIns) => {\n    quill.current = quillIns;\n  };\n  const quillChange = (delta, old, source) => {\n    // console.log('quill-change:', delta, old, source);\n    setDelta(JSON.stringify(quill.current.getContents()));\n  };\n  const RichTextEditor = window.quillReactCommercial;\n\n  return (\n    <div className=\"App\">\n      <RichTextEditor\n        i18n={'zh'}\n        readOnly={false}\n        modules={{\n          table: {},\n          codeHighlight: true,\n          imageHandler: {\n            imgUploadApi: (formData) =>\n              // console.log(apiURL('uploadImg'))\n              request(apiURL('uploadImg'), ajaxFormPostOptions(formData)).then(\n                (response) => response.url,\n              ),\n            uploadFailCB: () => console.error('图片上传失败'),\n          },\n        }}\n        getQuill={getQuill}\n        content={\n          // 初始化笔记内容，而不能直接使用activeNote.content，因为当更新或保存会重新渲染导致内容重置到保存时刻，光标变到开头\n          initContent\n        }\n        onChange={quillChange}\n        onFocus={(arg) => {}}\n      />\n      <div style={{ height: 200 }}>{delta}</div>\n    </div>\n  );\n};\nconst domContainer = document.querySelector('#root');\nconst root = ReactDOM.createRoot(domContainer);\nroot.render(<App />);\n"],"mappings":";;;;;;;;AAAA,IAAMA,GAAG,GAAG,SAANA,GAAGA,CAAA,EAAS;EAChB,IAAMC,KAAK,GAAGC,KAAK,CAACC,MAAM,CAAC,CAAC,CAAC,CAAC;EAC9B,IAAAC,eAAA,GAA0BF,KAAK,CAACG,QAAQ,CAAC,EAAE,CAAC;IAAAC,gBAAA,GAAAC,cAAA,CAAAH,eAAA;IAArCI,KAAK,GAAAF,gBAAA;IAAEG,QAAQ,GAAAH,gBAAA;EACtB,IAAMI,WAAW,GAAG,EAAE;EACpB;EACF,IAAMC,QAAQ,GAAG,SAAXA,QAAQA,CAAIC,QAAQ,EAAK;IAC7BX,KAAK,CAACY,OAAO,GAAGD,QAAQ;EAC1B,CAAC;EACD,IAAME,WAAW,GAAG,SAAdA,WAAWA,CAAIN,KAAK,EAAEO,GAAG,EAAEC,MAAM,EAAK;IAC1C;IACAP,QAAQ,CAACQ,IAAI,CAACC,SAAS,CAACjB,KAAK,CAACY,OAAO,CAACM,WAAW,CAAC,CAAC,CAAC,CAAC;EACvD,CAAC;EACD,IAAMC,cAAc,GAAGC,MAAM,CAACC,oBAAoB;EAElD,oBACEpB,KAAA,CAAAqB,aAAA;IAAKC,SAAS,EAAC;EAAK,gBAClBtB,KAAA,CAAAqB,aAAA,CAACH,cAAc;IACbK,IAAI,EAAE,IAAK;IACXC,QAAQ,EAAE,KAAM;IAChBC,OAAO,EAAE;MACPC,KAAK,EAAE,CAAC,CAAC;MACTC,aAAa,EAAE,IAAI;MACnBC,YAAY,EAAE;QACZC,YAAY,EAAE,SAAAA,aAACC,QAAQ;UAAA;YACrB;YACAC,OAAO,CAACC,MAAM,CAAC,WAAW,CAAC,EAAEC,mBAAmB,CAACH,QAAQ,CAAC,CAAC,CAACI,IAAI,CAC9D,UAACC,QAAQ;cAAA,OAAKA,QAAQ,CAACC,GAAG;YAAA,CAC5B;UAAC;QAAA;QACHC,YAAY,EAAE,SAAAA,aAAA;UAAA,OAAMC,OAAO,CAACC,KAAK,CAAC,QAAQ,CAAC;QAAA;MAC7C;IACF,CAAE;IACF9B,QAAQ,EAAEA,QAAS;IACnB+B,OAAO;IACL;IACAhC,WACD;IACDiC,QAAQ,EAAE7B,WAAY;IACtB8B,OAAO,EAAE,SAAAA,QAACC,GAAG,EAAK,CAAC;EAAE,CACtB,CAAC,eACF3C,KAAA,CAAAqB,aAAA;IAAKuB,KAAK,EAAE;MAAEC,MAAM,EAAE;IAAI;EAAE,GAAEvC,KAAW,CACtC,CAAC;AAEV,CAAC;AACD,IAAMwC,YAAY,GAAGC,QAAQ,CAACC,aAAa,CAAC,OAAO,CAAC;AACpD,IAAMC,IAAI,GAAGC,QAAQ,CAACC,UAAU,CAACL,YAAY,CAAC;AAC9CG,IAAI,CAACG,MAAM,eAACpD,KAAA,CAAAqB,aAAA,CAACvB,GAAG,MAAE,CAAC,CAAC"}